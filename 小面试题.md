## 1、String、StringBuffer、StringBuilder的区别
这三者的主要区别体现在 **可变性**、**线程安全性** 和 **性能** 这三个维度上。
### ① 可变性 (Mutability)
#### **String 是不可变的：**
- 它的底层是一个被 `final` 修饰的字符数组（Java 9 之前是 `char[]`，Java 9 之后优化为 `byte[]`）。
    
- 任何对 String 的修改（如拼接、截取）都不会改变原对象，而是创建一个**新的 String 对象**
#### StringBuffer 和 StringBuilder 是可变的
- 它们都继承自 `AbstractStringBuilder` 类。
    
- 在进行字符串操作时，都是直接修改底层的数组，**不会**产生新的对象，避免了内存的浪费。
### ② 线程安全性 (Thread Safety)
- **String：** 因为不可变，所以它是**线程安全**的（只读属性天然安全）。
    
- **StringBuffer：** 是**线程安全**的。它在 `append` 等修改数据的方法上都加了 `synchronized` 锁。
    
- **StringBuilder：** 是**非线程安全**的。它没有锁，所以在多线程环境下并发修改会导致数据错乱。
### ③ 性能 (Performance)
- **StringBuilder > StringBuffer > String**
    
- **StringBuilder** 性能最好，因为它没有锁的开销。
    
- **StringBuffer** 次之，因为加锁和释放锁需要消耗资源。
    
- **String** 性能最差（在频繁修改时），因为它会不断创建新对象和回收旧对象，给 GC（垃圾回收）带来很大压力。
### 总结
所以，在实际开发中：

- 如果字符串很少修改，或者是常量，直接用 **String**。
    
- 如果是单线程的大量字符串操作（比如拼接 SQL、JSON、XML），首选 **StringBuilder**（这也是最常用的）。
    
- 只有在极少数涉及多线程共享变量修改的场景下，才会考虑 **StringBuffer**。